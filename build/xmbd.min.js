/*! xmbd - v0.2.2 - built: 2014-04-20 */

!function(a){"use strict";a.fn.xmbd=function(){var b=this;b.current={state:-1,provider:"",id:""},b.availableStates={"-1":"vUnstarted",0:"vEnded",1:"vPlaying",2:"vPaused",3:"vBuffering",5:"vCued",9:"playerReady"},b.guid=b.guid="xxxxxxxx_xxxx_4xxx_yxxx_xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:3&b|8).toString(16)});var c={};return b.on=function(a,b){c.hasOwnProperty(a)||(c[a]=[]),c[a].push(b)},b.unbind=function(a){c.hasOwnProperty(a)&&delete c[a]},b.trigger=function(b,d){c.hasOwnProperty(b)&&a(c[b]).each(function(a,b){b(d)})},b.clearEvents=function(){c={}},b.provider={youtube:{iframe:!1,getId:function(a){if("string"!=typeof a)return!1;var b=a.match(/(?:youtube(?:-nocookie)?\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i);return b?b[1]:!1},getUrl:function(a,c){c=c||{};var d=["autoplay="+ +(c.autoplay||!1),"autohide="+(c.autohide?"1":"2"),"loop="+(c.loop?"1&playlist="+a:"0"),"theme="+(c.theme||"dark"),"origin="+encodeURIComponent(window.location.origin),"playerapiid="+b.guid,"enablejsapi=1","version=3","rel=0"].join("&");return"https://www.youtube.com/v/"+a+"?"+d},getInfo:function(b,c){a.getJSON("//gdata.youtube.com/feeds/api/videos/"+b+"?alt=json-in-script&callback=?",function(d){if(!d||!d.entry)return c(!0);var e=d.entry,f={};return f.name=e.title.$t,f.provider="youtube",f.id=b,f.duration=-1,f.available=!1,a.each(e.media$group.media$content,function(a,b){5===b.yt$format&&(f.duration=b.duration,f.available=!0)}),e.app$control&&e.app$control.yt$state&&(f.available=!1),c(null,f)})},state:function(a){return b.availableStates.hasOwnProperty(a)?b.availableStates[a]:a},play:function(){b.player.playVideo()},pause:function(){b.player.pauseVideo()},stop:function(){b.player.stopVideo()},cue:function(a){b.player.seekTo(a,!0)}},vimeo:{iframe:!0,getId:function(a){var b=a.match(/vimeo\.com\/(?:.*#|.*\/videos\/|video\/)?([0-9]+)/i);return b?b[1]:!1},getUrl:function(a,c){c=c||{};var d=["?autoplay="+ +(c.autoplay||!1),"byline="+ +!c.autohide,"portrait="+ +!c.autohide,"color="+(c.color||"00adef").replace("#",""),"loop="+ +(c.loop||!1),"player_id="+b.guid,"api=1"].join("&");return"//player.vimeo.com/video/"+a+d},getInfo:function(b,c){a.ajax({url:"//www.vimeo.com/api/v2/video/"+b+".json?callback=?",dataType:"jsonp",timeout:3e3,success:function(a){return a&&a[0]?(c(null,{name:a[0].title,provider:"vimeo",id:b,duration:a[0].duration,available:"anywhere"==a[0].embed_privacy}),void 0):c(!0)},error:function(){return c(!0)}})},state:function(a){var c=b.availableStates;switch(a){case"finish":return c[0];case"play":return c[1];case"pause":return c[2];case"loadProgress":return c[3];case"seek":return c[5];case"ready":return c[9];default:return a}},post:function(c,d){d=d||!0;var e=a("#"+b.guid),f=window.location.protocol+e.attr("src").split("?")[0];e[0].contentWindow.postMessage(JSON.stringify({method:c,value:d}),f)},play:function(){b.provider.vimeo.post("play")},pause:function(){b.provider.vimeo.post("pause")},stop:function(){b.provider.vimeo.post("unload")},cue:function(a){b.provider.vimeo.post("seekTo",a)}},dailymotion:{iframe:!1,getId:function(a){var b=a.match(/dailymotion.com\/(?:(?:video|hub|swf)\/([^_]+))?[^#]*(?:#video=([^_&]+))?/i);return b?b[2]?b[2]:b[1]:!1},getUrl:function(a,c){c=c||{};var d=["?autoPlay="+ +(c.autoplay||!1),"highlight="+(c.highlight||"").replace("#",""),"foreground="+(c.foreground||"").replace("#",""),"background="+(c.background||"").replace("#",""),"playerapiid="+b.guid,"enableApi=1"].join("&").replace("&highlight=&foreground=&background=","");return"//www.dailymotion.com/swf/"+a+d},getInfo:function(b,c){a.getJSON("https://api.dailymotion.com/video/"+b+"?fields=title,duration,embed_url&callback=?",function(a){return a&&a.embed_url?(c(null,{name:a.title,provider:"dailymotion",id:b,duration:a.duration,available:!!a.embed_url}),void 0):c(!0)})},play:function(){b.player.playVideo()},pause:function(){b.player.pauseVideo()},stop:function(){b.player.stopVideo()},cue:function(a){b.player.seekTo(a)}}},b.getMediaUrl=function(a,c,d){if(!b.provider.hasOwnProperty(a))throw b.trigger("error","Provider not supported"),new Error("Provider not supported");return{url:b.provider[a].getUrl(c,d),iframe:b.provider[a].iframe}},b.getMediaId=function(a){for(var c in b.provider)if(b.provider.hasOwnProperty(c)){var d=b.provider[c].getId(a);if(d)return{provider:c,id:d}}return!1},b.getMediaInfo=function(a,c,d){return b.provider.hasOwnProperty(a)?b.provider[a].getInfo(c,d):(b.trigger("error","Provider not supported"),d(!0))},b.action=function(a){if(b.provider[b.current.provider].hasOwnProperty(a))return b.provider[b.current.provider][a].apply(this,Array.prototype.slice.call(arguments,1));if("toggle"===a)return"vPlaying"!==b.current.state?(b.action("play"),"play"):(b.action("pause"),"pause");throw new Error("No such method: "+a)},b.embed=function(c,d,e){if("object"==typeof c&&"undefined"==typeof d&&"undefined"==typeof e&&(e=c,d=e.id,c=e.provider),e=e||{},e.hasOwnProperty("on"))for(var f in e.on)e.on.hasOwnProperty(f)&&b.on(f,e.on[f]);var g=b.getMediaUrl(c,d,e);b.current.provider=c,b.current.id=d,a("#"+b.guid).length>0&&a("#"+b.guid).remove(),b.player&&b.triggerStateChange(b.availableStates["-1"]),g.iframe?b.embedIframe(g.url):b.embedSWF(g.url)},b.embedIframe=function(a){b.html("<iframe src='"+a+"' id='"+b.guid+"' width='100%' height='100%' frameborder='0' webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>")},b.embedSWF=function(a){b.html("<div id='"+b.guid+"'></div>"),swfobject.embedSWF(a,b.guid,"100%","100%","8",null,null,{allowScriptAccess:"always",allowFullScreen:"true"},{id:b.guid},function(a){if(!a.success)throw b.trigger("error","Unable to embed SWF"),new Error("Unable to embed SWF")})},b.triggerStateChange=function(a){b.current.state=a,b.trigger(a),b.trigger("playerStateChange",a)},window["onytcstatechange_"+b.guid]=function(a){a=b.provider.youtube.state(a),"playerReady"===a&&(b.player=document.getElementById(b.guid)),b.triggerStateChange(a)},window["onvimeostatechange_"+b.guid]=function(c){c=b.provider.vimeo.state(c),b.triggerStateChange(c),"playerReady"===c&&(b.player="vimeo",a(["pause","finish","play"]).each(function(a,c){b.provider.vimeo.post("addEventListener",c)}))},b}}(jQuery),window.ytCompatibleReady=function(a){"use strict";var b=document.getElementById(a);b.addEventListener("onStateChange","onytcstatechange_"+a),b.addEventListener("onError","onytcstatechange_"+a),window["onytcstatechange_"+a](9)},window.onVimeoMessage=function(a){"use strict";var b=JSON.parse(a.data);window["onvimeostatechange_"+b.player_id](b.event)},window.addEventListener?window.addEventListener("message",window.onVimeoMessage,!1):window.attachEvent("onmessage",window.onVimeoMessage,!1),window.onDailymotionPlayerReady=window.ytCompatibleReady,window.onYouTubePlayerReady=window.ytCompatibleReady,window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""));
//# sourceMappingURL=xmbd.min.map