/*! xmbd - v0.3.0 - built: 2014-07-15 */

!function(a){"use strict";var b=function(b){var c=this;c.element=b,c.$element=a(b);var d=!0;c.current={state:-1,provider:"",id:""};var e={"-1":"vUnstarted",0:"vEnded",1:"vPlaying",2:"vPaused",3:"vBuffering",5:"vCued",9:"playerReady"};c.guid="xxxxxxxx_xxxx_4xxx_yxxx_xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:3&b|8).toString(16)});var f={};c.on=function(a,b){f.hasOwnProperty(a)||(f[a]=[]),f[a].push(b)},c.unbind=function(b){"function"==typeof b?a.each(f,function(a,c){for(var d=0;d<c.length;d++)c[d]===b&&f.splice(d,1)}):f.hasOwnProperty(b)&&delete f[b]},c.trigger=function(b,d){f.hasOwnProperty(b)&&a(f[b]).each(function(a,b){b.call(c,d)})},c.clearEvents=function(){f={}};var g={iframe:!1,getId:function(a){if("string"!=typeof a)return!1;var b=a.match(/(?:youtube(?:-nocookie)?\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i);return b?b[1]:!1},getUrl:function(a,b){b=b||{};var e=["autoplay="+ +(b.autoplay||!1),"autohide="+(b.autohide?"1":"2"),"loop="+(b.loop?"1&playlist="+a:"0"),"theme="+(b.theme||"dark"),"origin="+encodeURIComponent(window.location.origin),"playerapiid="+c.guid,"enablejsapi=1","version=3","rel=0"].join("&");return(d?"https:":"")+"//www.youtube.com/v/"+a+"?"+e},getInfo:function(b,c){a.getJSON((d?"https:":"")+"//gdata.youtube.com/feeds/api/videos/"+b+"?alt=json-in-script&callback=?",function(d){if(!d||!d.entry)return c(!0);var e=d.entry,f={};return f.name=e.title.$t,f.provider="youtube",f.id=b,f.duration=-1,f.available=!1,a.each(e.media$group.media$content,function(a,b){5===b.yt$format&&(f.duration=b.duration,f.available=!0)}),e.app$control&&e.app$control.yt$state&&(f.available=!1),c(null,f)})},state:function(a){return e.hasOwnProperty(a)?e[a]:a},play:function(){c.player.playVideo()},pause:function(){c.player.pauseVideo()},stop:function(){c.player.stopVideo()},cue:function(a){c.player.seekTo(a,!0)}},h={iframe:!0,getId:function(a){var b=a.match(/vimeo\.com\/(?:.*#|.*\/videos\/|video\/)?([0-9]+)/i);return b?b[1]:!1},getUrl:function(a,b){b=b||{};var e=["?autoplay="+ +(b.autoplay||!1),"byline="+ +!b.autohide,"portrait="+ +!b.autohide,"color="+(b.color||"00adef").replace("#",""),"loop="+ +(b.loop||!1),"player_id="+c.guid,"api=1"].join("&");return(d?"https:":"")+"//player.vimeo.com/video/"+a+e},getInfo:function(b,c){a.ajax({url:(d?"https:":"")+"//www.vimeo.com/api/v2/video/"+b+".json?callback=?",dataType:"jsonp",timeout:3e3,success:function(a){return a&&a[0]?void c(null,{name:a[0].title,provider:"vimeo",id:b,duration:a[0].duration,available:"anywhere"==a[0].embed_privacy}):c(!0)},error:function(){return c(!0)}})},state:function(a){var b=e;switch(a){case"finish":return b[0];case"play":return b[1];case"pause":return b[2];case"loadProgress":return b[3];case"seek":return b[5];case"ready":return b[9];default:return a}},post:function(b,d){d=d||!0;var e=a("#"+c.guid),f=window.location.protocol+e.attr("src").split("?")[0];e[0].contentWindow.postMessage(JSON.stringify({method:b,value:d}),f)},play:function(){c.provider.vimeo.post("play")},pause:function(){c.provider.vimeo.post("pause")},stop:function(){c.provider.vimeo.post("unload")},cue:function(a){c.provider.vimeo.post("seekTo",a)}},i={iframe:!1,getId:function(a){var b=a.match(/dailymotion.com\/(?:(?:video|hub|swf)\/([^_]+))?[^#]*(?:#video=([^_&]+))?/i);return b?b[2]?b[2]:b[1]:!1},getUrl:function(a,b){b=b||{};var e=["?autoPlay="+ +(b.autoplay||!1),"highlight="+(b.highlight||"").replace("#",""),"foreground="+(b.foreground||"").replace("#",""),"background="+(b.background||"").replace("#",""),"playerapiid="+c.guid,"enableApi=1"].join("&").replace("&highlight=&foreground=&background=","");return(d?"https:":"")+"//www.dailymotion.com/swf/"+a+e},getInfo:function(b,c){a.getJSON("https://api.dailymotion.com/video/"+b+"?fields=title,duration,embed_url&callback=?",function(a){return a&&a.embed_url?void c(null,{name:a.title,provider:"dailymotion",id:b,duration:a.duration,available:!!a.embed_url}):c(!0)})},play:function(){c.player.playVideo()},pause:function(){c.player.pauseVideo()},stop:function(){c.player.stopVideo()},cue:function(a){c.player.seekTo(a)}};c.provider={},c.provider.youtube=g,c.provider.vimeo=h,c.provider.dailymotion=i,c.getMediaUrl=function(a,b,d){return c.provider.hasOwnProperty(a)||c.trigger("error","Provider not supported"),{url:c.provider[a].getUrl(b,d),iframe:c.provider[a].iframe}},c.getMediaId=function(a){for(var b in c.provider)if(c.provider.hasOwnProperty(b)){var d=c.provider[b].getId(a);if(d)return{provider:b,id:d}}return!1},c.getMediaInfo=function(a,b,d){return c.provider.hasOwnProperty(a)?c.provider[a].getInfo(b,d):(c.trigger("error","Provider not supported"),d(!0))},c.action=function(a){return c.provider[c.current.provider].hasOwnProperty(a)?c.provider[c.current.provider][a].apply(c,Array.prototype.slice.call(arguments,1)):"toggle"===a?"vPlaying"!==c.current.state?(c.action("play"),"play"):(c.action("pause"),"pause"):void c.trigger("error","No such method: '"+a+"'")},c.embed=function(b,d,f){if("object"==typeof b&&"undefined"==typeof d&&"undefined"==typeof f&&(f=b,d=f.id,b=f.provider),f=f||{},f.hasOwnProperty("on"))for(var g in f.on)f.on.hasOwnProperty(g)&&c.on(g,f.on[g]);var h=c.getMediaUrl(b,d,f);c.current.provider=b,c.current.id=d,a("#"+c.guid).length>0&&a("#"+c.guid).remove(),c.player&&c.triggerStateChange(e[-1]),h.iframe?c.embedIframe(h.url):c.embedSWF(h.url)},c.embedIframe=function(a){c.$element.html("<iframe src='"+a+"' id='"+c.guid+"' width='100%' height='100%' frameborder='0' webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>")},c.embedSWF=function(a){c.$element.html("<div id='"+c.guid+"'></div>"),swfobject.embedSWF(a,c.guid,"100%","100%","8",null,null,{allowScriptAccess:"always",allowFullScreen:"true"},{id:c.guid},function(a){a.success||c.trigger("error","Unable to embed SWF")})},c.triggerStateChange=function(a){c.current.state=a,c.trigger(a),c.trigger("playerStateChange",a)},window["onytcstatechange_"+c.guid]=function(a){a=c.provider.youtube.state(a),"playerReady"===a&&(c.player=document.getElementById(c.guid)),c.triggerStateChange(a)},window["onvimeostatechange_"+c.guid]=function(b){b=c.provider.vimeo.state(b),c.triggerStateChange(b),"playerReady"===b&&(c.player="vimeo",a(["pause","finish","play"]).each(function(a,b){c.provider.vimeo.post("addEventListener",b)}))}};a.fn.xmbd=function(){var c=a(this).data("plugin_xmbd");return c||(c=new b(this),a(this).data("plugin_xmbd",c)),c}}(jQuery),window.ytCompatibleReady=function(a){"use strict";var b=document.getElementById(a);b.addEventListener("onStateChange","onytcstatechange_"+a),b.addEventListener("onError","onytcstatechange_"+a),window["onytcstatechange_"+a](9)},window.onVimeoMessage=function(a){"use strict";var b=JSON.parse(a.data);window["onvimeostatechange_"+b.player_id](b.event)},window.addEventListener?window.addEventListener("message",window.onVimeoMessage,!1):window.attachEvent("onmessage",window.onVimeoMessage,!1),window.onDailymotionPlayerReady=window.ytCompatibleReady,window.onYouTubePlayerReady=window.ytCompatibleReady,window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""));
//# sourceMappingURL=xmbd.min.map